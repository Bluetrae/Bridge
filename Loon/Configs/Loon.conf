[General]
# GeoIP æ•°æ®åº“ï¼ˆç”¨äº GEOIP è§„åˆ™åˆ¤æ–­ï¼‰
geoip-url = https://raw.githubusercontent.com/Loyalsoldier/geoip/release/Country.mmdb
# ä»… IPv4ï¼ˆå‡å°‘éƒ¨åˆ†ç¯å¢ƒä¸‹çš„ IPv6 å¹²æ‰°ï¼‰
ip-mode = v4-only

# DNSï¼ˆDoH ä¸ºä¸»ï¼Œæ˜æ–‡å…œåº•ï¼‰
dns-server = 223.5.5.5,119.29.29.29
doh-server = https://dns.alidns.com/dns-query,https://doh.pub/dns-query,https://dns.quad9.net/dns-query
doh3-server = h3://dns.alidns.com/dns-query

# å±€åŸŸç½‘/ä¿ç•™åœ°å€ä¸èµ°ä»£ç†
skip-proxy = 10.0.0.0/8,172.16.0.0/12,192.168.0.0/16,localhost,*.local,e.crashlytics.com
# TUN ç»•è¿‡ç½‘æ®µï¼ˆå¸¸è§ä¿ç•™åœ°å€ï¼‰
bypass-tun = 10.0.0.0/8,100.64.0.0/10,127.0.0.0/8,169.254.0.0/16,172.16.0.0/12,192.0.0.0/24,192.0.2.0/24,192.88.99.0/24,192.168.0.0/16,198.51.100.0/24,203.0.113.0/24,224.0.0.0/4,255.255.255.255/32

# å±€åŸŸç½‘ HTTP/SOCKS5 è®¿é—®ç«¯å£ï¼ˆé»˜è®¤å…³é—­ allow-wifi-accessï¼‰
allow-wifi-access = false
wifi-access-http-port = 7222
wifi-access-socks5-port = 7223

# è¿é€šæ€§æµ‹è¯•ï¼ˆç”¨äºç›´è¿/ä»£ç†åˆ¤æ–­ï¼‰
# ç›´è¿æµ‹è¯• URL
internet-test-url = http://connectivitycheck.platform.hicloud.com/generate_204
# ä»£ç†æµ‹é€Ÿ URL
proxy-test-url = http://1.1.1.1/generate_204
# å¯æ›¿æ¢å ä½ï¼ˆæŒ‰éœ€ï¼‰
# internet-test-url = __INTERNET_TEST_URL__
# proxy-test-url = __PROXY_TEST_URL__

test-timeout = 5
interface-mode = auto
disable-stun = true
sni-sniffing = false

# è®¢é˜…è§£æå™¨ï¼ˆSub-Storeï¼‰
resource-parser = https://raw.githubusercontent.com/sub-store-org/Sub-Store/release/sub-store-parser.loon.min.js


[Proxy]
# å¯ç•™ç©ºï¼ˆå¦‚éœ€æ‰‹åŠ¨èŠ‚ç‚¹å¯åœ¨æ­¤æ·»åŠ ï¼‰


[Remote Proxy]
# =========================
# è®¢é˜…å¯¼å…¥ï¼ˆå¿…é¡»æ›¿æ¢å ä½ç¬¦ï¼‰
# =========================
# ä¸»è®¢é˜…ï¼ˆå¿…å¡«ï¼‰
MainRemote = __LOON_MAIN_SUB_URL__,udp=true,block-quic=true,fast-open=default,vmess-aead=true,skip-cert-verify=true,enabled=true,flexible-sni=false
# å¤‡ç”¨è®¢é˜…ï¼ˆå¯é€‰ï¼›ä¸ç”¨å¯åˆ ï¼‰
SpareRemote = __LOON_SPARE_SUB_URL__,parser-enabled=true,udp=true,block-quic=true,fast-open=default,vmess-aead=true,skip-cert-verify=true,enabled=true,flexible-sni=false


[Proxy Chain]
# å¯ç•™ç©ºï¼ˆå¦‚éœ€ä¸²è”ä»£ç†å†é…ç½®ï¼‰


[Proxy Group]
# =========================
# è®¢é˜…å®¹å™¨ç»„
# =========================
MainSub = select,MainRemote
SpareSub = select,SpareRemote

# =========================
# æ€»å‡ºå£ / å…œåº•
# =========================
Proxy = select,HK,TW,JP,US,SG,SpareSub,DIRECT
Final = select,HK,TW,JP,US,SG,SpareSub,Auto,DIRECT

# =========================
# å¸¸ç”¨ä¸šåŠ¡ç»„ï¼ˆæŒ‰éœ€åˆ‡æ¢åœ°åŒºï¼‰
# =========================
Telegram = select,HK,TW,JP,US,SG,Final
X = select,HK,TW,JP,US,SG,Final
YouTube = select,HK,TW,JP,US,SG,Final
Instagram = select,HK,TW,JP,US,SG,Final
TikTok = select,HK,TW,JP,US,SG,Final
China = select,HK,TW,JP,US,SG,Final,DIRECT

# =========================
# åœ°åŒºæµ‹é€Ÿå…¥å£ï¼ˆurl-testï¼‰
# =========================
HKG = url-test,HK_Filter,interval=600,tolerance=100
TWN = url-test,TW_Filter,interval=600,tolerance=100
JPN = url-test,JP_Filter,interval=600,tolerance=100
USA = url-test,US_Filter,interval=600,tolerance=100
SGP = url-test,SG_Filter,interval=600,tolerance=100

# =========================
# åœ°åŒºæ‰‹åŠ¨å…¥å£ï¼ˆselectï¼‰
# =========================
HK = select,HK_Filter
TW = select,TW_Filter
JP = select,JP_Filter
US = select,US_Filter
SG = select,SG_Filter

# Autoï¼šç»¼åˆè‡ªåŠ¨å‡ºå£ï¼ˆç»™ Final ä½¿ç”¨ï¼‰
Auto = select,HKG,TWN,JPN,USA,SGP


[Remote Filter]
# ä»ä¸»è®¢é˜…ä¸­æŒ‰èŠ‚ç‚¹åç§°ç­›é€‰åœ°åŒº
# å¦‚ä½ çš„èŠ‚ç‚¹å‘½åé£æ ¼ä¸åŒï¼Œè¯·ä¿®æ”¹ FilterKey æ­£åˆ™
HK_Filter = NameRegex,MainRemote, FilterKey = "(?i)(é¦™æ¸¯|ğŸ‡­ğŸ‡°|hong\\s*kong|hongkong|(?:^|[^A-Za-z])hk(?:g)?(?:[^A-Za-z]|$))"
TW_Filter = NameRegex,MainRemote, FilterKey = "(?i)(å°æ¹¾|å°ç£|ğŸ‡¹ğŸ‡¼|taiwan|taipei|(?:^|[^A-Za-z])tw(?:n)?(?:[^A-Za-z]|$))"
JP_Filter = NameRegex,MainRemote, FilterKey = "(?i)(æ—¥æœ¬|ğŸ‡¯ğŸ‡µ|japan|tokyo|osaka|(?:^|[^A-Za-z])jp(?:n)?(?:[^A-Za-z]|$))"
US_Filter = NameRegex,MainRemote, FilterKey = "(?i)(ç¾å›½|ç¾åœ‹|ğŸ‡ºğŸ‡¸|united\\s*states|america|(?:^|[^A-Za-z])us(?:a)?(?:[^A-Za-z]|$))"
SG_Filter = NameRegex,MainRemote, FilterKey = "(?i)(æ–°åŠ å¡|ç‹®åŸ|ç…åŸ|ğŸ‡¸ğŸ‡¬|singapore|(?:^|[^A-Za-z])sg(?:p)?(?:[^A-Za-z]|$))"


[Rule]
# =========================
# æœ¬åœ°è§„åˆ™ï¼ˆä¼˜å…ˆçº§é«˜äº Remote Ruleï¼‰
# å¯æ”¾è‡ªå®šä¹‰å¼ºåˆ¶åˆ†æµ
# =========================
DOMAIN-SUFFIX,vercel.app,Proxy

# å±€åŸŸç½‘ / æœ¬åœ°åŸŸåä¿é™©
DOMAIN-SUFFIX,local,DIRECT
DOMAIN-SUFFIX,lan,DIRECT
DOMAIN-SUFFIX,home,DIRECT
DOMAIN-SUFFIX,localdomain,DIRECT

# ç§ç½‘æ®µç›´è¿ä¿é™©
IP-CIDR,192.168.0.0/16,DIRECT,no-resolve
IP-CIDR,10.0.0.0/8,DIRECT,no-resolve
IP-CIDR,172.16.0.0/12,DIRECT,no-resolve

# é‡è¦ï¼šä¸åœ¨æœ¬åœ°è§„åˆ™é‡Œæ”¾ GEOIP,CN,DIRECTï¼Œé¿å…æå‰æˆªæµè¿œç¨‹è§„åˆ™
FINAL,Final


[Remote Rule]
# =========================
# 0) å¹¿å‘Š / è·Ÿè¸ªï¼ˆå»ºè®®æ”¾å‰é¢ï¼‰
# =========================
https://raw.githubusercontent.com/TG-Twilight/AWAvenue-Ads-Rule/main/Filters/AWAvenue-Ads-Rule-Surge.list, policy=REJECT, tag=AWAvenue-Ads, enabled=true
https://raw.githubusercontent.com/ConnersHua/RuleGo/master/Surge/Ruleset/Extra/Reject/Tracking.list, policy=REJECT, tag=Tracking-Extra, enabled=true

# =========================
# 1) å›½å†…ç›´è¿ / è§£å°ï¼ˆæ”¾åœ¨ App åˆ†æµå‰ï¼‰
# =========================
https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ChinaDomain.list, policy=DIRECT, tag=ChinaDomain, enabled=true
https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/UnBan.list, policy=DIRECT, tag=UnBan, enabled=true
https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ChinaIp.list, policy=DIRECT, tag=ChinaIP, enabled=true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Loon/WeChat/WeChat.list, policy=DIRECT, tag=WeChat, enabled=true
https://ruleset.skk.moe/List/non_ip/apple_cn.conf, policy=DIRECT, tag=Apple-CN, enabled=true
https://github.com/Repcz/Tool/raw/X/Loon/Rules/Apple.list, policy=DIRECT, tag=Apple-Repcz, enabled=true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Loon/DouYin/DouYin.list, policy=China, tag=DouYin, enabled=true

# =========================
# 2) å¸¸ç”¨ App åˆ†æµ
# æ³¨æ„ï¼šYouTube å»ºè®®æ”¾åœ¨é€šç”¨è§„åˆ™å‰
# =========================
https://github.com/Repcz/Tool/raw/X/Loon/Rules/Telegram_NoIP.list, policy=Telegram, tag=Telegram-NoIP, enabled=true
https://github.com/Repcz/Tool/raw/X/Loon/Rules/Telegram.list, policy=Telegram, tag=Telegram, enabled=true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Loon/Twitter/Twitter.list, policy=X, tag=Twitter-X, enabled=true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Loon/Instagram/Instagram.list, policy=Instagram, tag=Instagram, enabled=true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Loon/Threads/Threads.list, policy=Instagram, tag=Threads, enabled=true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Loon/YouTube/YouTube.list, policy=YouTube, tag=YouTube, enabled=true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Loon/TikTok/TikTok.list, policy=TikTok, tag=TikTok, enabled=true

# =========================
# 3) å±€åŸŸç½‘
# =========================
https://raw.githubusercontent.com/Repcz/Tool/X/Loon/Rules/Lan.list, policy=DIRECT, tag=LAN-Local, enabled=true


[Rewrite]
# å¯ç•™ç©ºï¼ˆå¦‚éœ€é‡å†™è§„åˆ™åœ¨æ­¤æ·»åŠ ï¼‰


[Script]
# å¯ç•™ç©ºï¼ˆå¦‚éœ€è„šæœ¬åœ¨æ­¤æ·»åŠ ï¼‰


[Plugin]
# å…¬å¼€æ¨¡æ¿å»ºè®®åªä¿ç•™å°‘é‡åŸºç¡€æ’ä»¶ï¼ˆæŒ‰éœ€å¯ç”¨ï¼‰
# ä¸éœ€è¦å¯ç›´æ¥åˆ æ‰æ•´æ®µ
https://kelee.one/Tool/Loon/Lpx/Block_HTTPDNS.lpx, enabled=true
https://kelee.one/Tool/Loon/Lpx/BlockAdvertisers.lpx, enabled=true
https://kelee.one/Tool/Loon/Lpx/Node_detection_tool.lpx, enabled=true
https://kelee.one/Tool/Loon/Lpx/Sub-Store.lpx, policy=Proxy, enabled=true


[Mitm]
# å¦‚éœ€å¯ç”¨ MITMï¼Œè¯·å¡«å†™ä½ è‡ªå·±çš„è¯ä¹¦ä¸ hostname
# âš ï¸ ä¸è¦å…¬å¼€è¯ä¹¦å†…å®¹
